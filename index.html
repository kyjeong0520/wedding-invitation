<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>모바일 청첩장</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* ===== 기본 스타일 ===== */
        html { scroll-behavior: smooth; }
        body {
            margin: 0;
            padding: 0;
            font-family: 'Noto Serif KR', serif;
            background: #fff;
        }

        /* ===== 새로 추가된 페이드인 애니메이션 스타일 ===== */
        /* 애니메이션을 적용할 섹션의 초기 상태 (투명하고 살짝 아래에 위치) */
        .fade-in-section {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        /* 화면에 보일 때 적용될 스타일 (선명하고 제자리로) */
        .fade-in-section.visible {
            opacity: 1;
            transform: translateY(0);
        }
        /* ============================================== */

        .main-content {
            margin: 0 auto;
            max-width: 700px;
            padding: 0 10px;
        }
        .centered-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 80px 0; /* 섹션 간 간격 확보 */
            box-sizing: border-box;
        }

        /* 메인 사진 스타일 */
        .main-hero-photo {
            width: 100%;
            max-width: 600px;
            margin: 0 auto 24px auto;
            height: 380px;
            overflow: hidden;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
        }
        .main-hero-img {
            width: 100%; height: 100%; object-fit: cover;
        }
        
        /* 갤러리 스타일 */
        .gallery-main-img {
            width: 100%; max-width: 600px; height: 420px; object-fit: cover; border-radius: 16px; box-shadow: 0 4px 16px rgba(0,0,0,0.08); margin-bottom: 16px; transition: opacity 0.4s;
        }
        .gallery-thumbs-scroll {
            display: flex; gap: 10px; overflow-x: auto; padding: 12px 0; max-width: 600px; scrollbar-width: none;
        }
        .gallery-thumbs-scroll::-webkit-scrollbar { display: none; }
        .gallery-thumb {
            width: 100px; height: 100px; object-fit: cover; border-radius: 8px; border: 2px solid transparent; cursor: pointer; opacity: 0.7; flex-shrink: 0; transition: border 0.2s, opacity 0.2s;
        }
        .gallery-thumb.active { border: 2px solid #ffb6b6; opacity: 1; }

        /* 하단 고정 탭 스타일 (기존 코드 유지) */
        .bottom-tabs {
            position: fixed; left: 0; bottom: 0; width: 100%; display: flex; justify-content: center; gap: 8px; background: rgba(255,255,255,0.85); box-shadow: 0 -2px 12px rgba(0,0,0,0.06); z-index: 300; padding: 8px 0 6px 0; border-top-left-radius: 16px; border-top-right-radius: 16px; backdrop-filter: blur(4px);
        }
        .bottom-tab {
            padding: 10px 18px; cursor: pointer; border: none; background: none; font-size: 1.08em; color: #333; outline: none; border-radius: 8px; font-family: inherit; transition: background 0.2s, color 0.2s; opacity: 0.85;
        }
        .bottom-tab.active { background: #ffb6b6; color: #fff; font-weight: bold; opacity: 1; }

        /* 모바일 화면 대응 */
        @media (max-width: 600px) {
            .bottom-tabs { gap: 4px; padding: 4px 0; }
            .bottom-tab { padding: 8px 10px; font-size: 0.98em; }
            .main-hero-photo, .gallery-main-img { border-radius: 0; }
        }
    </style>
</head>
<body>
    <div class="main-content">
        <div class="main-hero-photo">
            <img src="gallery/main1.jpg" alt="메인사진" class="main-hero-img">
        </div>
        <header class="centered-section">
            <h1>우리 결혼합니다</h1>
            <h2>정광용 & 윤나연</h2>
        </header>
        
        <section id="section-greeting" class="centered-section fade-in-section">
            <div style="width:100%; max-width:480px;">
                <div style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #888; padding-bottom:8px; margin-bottom:24px;">
                    <span style="font-weight:500; font-size:1.1em;">인사말</span>
                </div>
                <div style="font-size:1.1em; line-height:1.7; text-align:center;">
                    저희 두 사람이 사랑으로 하나 되는 자리에<br>
                    소중한 분들을 모시고자 합니다.<br>
                    오셔서 따뜻한 축복으로 함께 해주세요.
                </div>
            </div>
        </section>
        
        <section id="section-date" class="centered-section fade-in-section">
            <div style="width:100%; max-width:480px;">
                <div style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #888; padding-bottom:8px; margin-bottom:24px;"><span style="font-weight:500; font-size:1.1em;">예식 일시</span><span style="font-size:1.05em; color:#444;text-align:right;"> 2025년 12월 7일<br>일요일 오전 11시 </span></div>
                <table style="width:100%; border-collapse:collapse; margin-bottom:16px;">
                    <thead><tr><th style="color:#20613a; font-weight:700; font-size:1.1em; padding-bottom:12px;">일</th><th style="color:#20613a; font-weight:700; font-size:1.1em;">월</th><th style="color:#20613a; font-weight:700; font-size:1.1em;">화</th><th style="color:#20613a; font-weight:700; font-size:1.1em;">수</th><th style="color:#20613a; font-weight:700; font-size:1.1em;">목</th><th style="color:#20613a; font-weight:700; font-size:1.1em;">금</th><th style="color:#20613a; font-weight:700; font-size:1.1em;">토</th></tr></thead>
                    <tbody><tr><td></td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td></tr><tr><td><div style="width:36px; height:36px; margin:0 auto; display:flex; align-items:center; justify-content:center;"><span style="display:inline-block; width:36px; height:36px; background:#20613a; color:#fff; border-radius:50%; line-height:36px; font-weight:700;">7</span></div></td><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td></tr><tr><td>14</td><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td></tr><tr><td>21</td><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td></tr><tr><td>28</td><td>29</td><td>30</td><td>31</td><td></td><td></td><td></td></tr></tbody>
                </table>
            </div>
        </section>

        <section id="section-gallery" class="centered-section fade-in-section">
            <div style="width:100%; max-width:700px;">
                <div style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #888; padding-bottom:8px; margin-bottom:24px;"><span style="font-weight:500; font-size:1.1em;">사진 갤러리</span></div>
                <div class="gallery-main">
                    <img id="gallery-main-img" class="gallery-main-img" src="" alt="메인사진">
                </div>
                <div class="gallery-thumbs-scroll" id="gallery-thumbs-scroll"></div>
                <div style="text-align:center; margin-top:10px;">
                    <span id="gallery-index" style="font-size:1em; color:#888;"></span>
                </div>
            </div>
        </section>

        <section id="section-map" class="centered-section fade-in-section">
             <div style="width:100%; max-width:480px;">
                <div style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #888; padding-bottom:8px; margin-bottom:24px;"><span style="font-weight:500; font-size:1.1em;">오시는 길</span></div>
                <div class="map-wrapper">
                    <div id="daumRoughmapContainer1751038973324" class="root_daum_roughmap root_daum_roughmap_landing" style="width:100%;"></div>
                </div>
            </div>
        </section>

        <footer class="centered-section" style="padding:40px 0;">
            © 2025 정광용 & 윤나연의 모바일 청첩장
        </footer>
    </div>
    
    <div class="bottom-tabs">
        <button class="bottom-tab active" onclick="scrollToSection('section-greeting')">인사말</button>
        <button class="bottom-tab" onclick="scrollToSection('section-date')">예식일시</button>
        <button class="bottom-tab" onclick="scrollToSection('section-gallery')">갤러리</button>
        <button class="bottom-tab" onclick="scrollToSection('section-map')">오시는 길</button>
    </div>

    <script charset="UTF-8" class="daum_roughmap_loader_script" src="https://ssl.daumcdn.net/dmaps/map_js_init/roughmapLoader.js"></script>
    <script charset="UTF-8">
        new daum.roughmap.Lander({
            "timestamp" : "1751038973324",
            "key" : "4as3v2bygng",
            "mapWidth" : "100%", // 너비를 100%로 설정하여 반응형으로
            "mapHeight" : "360"
        }).render();
    </script>
    
    <script>
    // ===== 페이지 로드 시 실행될 스크립트 =====
    document.addEventListener('DOMContentLoaded', () => {
        // --- 1. 스크롤에 따른 페이드인 효과 (새로 추가 및 수정한 부분) ---
        // 애니메이션을 적용할 모든 섹션을 선택합니다.
        const fadeInSections = document.querySelectorAll('.fade-in-section');

        // IntersectionObserver: 스크롤 효율성을 높이는 최신 기술입니다.
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                // isIntersecting: 요소가 화면에 보이는지 여부 (true/false)
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible'); // 보이면 'visible' 클래스 추가
                }
            });
        }, {
            threshold: 0.1 // 요소가 10%만 보여도 애니메이션 시작
        });

        // 각 섹션에 대해 관찰을 시작합니다.
        fadeInSections.forEach(section => {
            observer.observe(section);
        });


        // --- 2. 하단 탭 스크롤 및 활성화 (기존 코드 정리) ---
        const tabs = document.querySelectorAll('.bottom-tab');
        const sections = document.querySelectorAll('section');

        window.scrollToSection = function(sectionId) {
            document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
        };
        
        // 스크롤 위치에 따라 탭 활성화
        window.addEventListener('scroll', () => {
            let currentSectionId = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (window.scrollY >= sectionTop - 100) { // 100px 위에서부터 활성화
                    currentSectionId = section.id;
                }
            });

            tabs.forEach(tab => {
                // tab의 onclick 속성에서 sectionId를 추출하여 비교
                if (tab.getAttribute('onclick').includes(currentSectionId)) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
        });


        // --- 3. 갤러리 기능 (기존 코드 유지) ---
        const galleryFolder = 'gallery';
        const galleryCount = 3; // 가진 사진 개수에 맞게 수정 (photo1, photo2, photo3)
        let galleryImages = [];
        let currentIdx = 0;

        function setMainImage(idx, fade = true) {
            const mainImg = document.getElementById('gallery-main-img');
            const thumbs = document.querySelectorAll('.gallery-thumb');
            const indexText = document.getElementById('gallery-index');

            if (fade) {
                mainImg.style.opacity = 0.2;
                setTimeout(() => {
                    mainImg.src = galleryImages[idx];
                    mainImg.style.opacity = 1;
                }, 180);
            } else {
                mainImg.src = galleryImages[idx];
                mainImg.style.opacity = 1;
            }

            thumbs.forEach((el, i) => el.classList.toggle('active', i === idx));
            currentIdx = idx;
            indexText.textContent = `${idx + 1} / ${galleryImages.length}`;
            
            const activeThumb = thumbs[idx];
            if (activeThumb) {
                activeThumb.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
            }
        }

        for (let i = 1; i <= galleryCount; i++) {
            galleryImages.push(`${galleryFolder}/photo${i}.jpg`);
        }

        const thumbsDiv = document.getElementById('gallery-thumbs-scroll');
        thumbsDiv.innerHTML = '';
        galleryImages.forEach((src, idx) => {
            const thumb = document.createElement('img');
            thumb.src = src;
            thumb.className = 'gallery-thumb';
            thumb.alt = `갤러리${idx+1}`;
            thumb.onclick = () => setMainImage(idx);
            thumbsDiv.appendChild(thumb);
        });

        if (galleryImages.length > 0) {
            setMainImage(0, false);
        }
    });
    
    // 페이지 새로고침 시 스크롤 위치가 유지되는 것을 방지
    if ('scrollRestoration' in history) {
        history.scrollRestoration = 'manual';
    }
    </script>
</body>
</html>